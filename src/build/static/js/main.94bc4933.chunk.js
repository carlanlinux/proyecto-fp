(this["webpackJsonpproyecto-fp"]=this["webpackJsonpproyecto-fp"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),c=(n(25),n(1)),s=n.n(c),o=n(21),a=n.n(o),i=(n(29),n(3)),u=n(6),j=n(5),l=(n(30),function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Hola, Bienvenid@ al Blog"}),Object(r.jsx)("p",{children:"Texto"}),Object(r.jsx)("p",{children:"Texto"}),Object(r.jsx)("p",{children:"Texto"})]})}),b=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Sobre mi"}),Object(r.jsx)("p",{children:"Texto"}),Object(r.jsx)("p",{children:"Texto"}),Object(r.jsx)("p",{children:"Texto"})]})},d=n(2),O=n.n(d),h=n(4),x=n(39),p=function(e){var t=e.articulos,n=e.tokenSesion,s=Object(c.useState)([]),o=Object(i.a)(s,2),a=(o[0],o[1],function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("/api/borrarPost",{method:"post",body:JSON.stringify({nombre:t}),headers:{"Content-Type":"application/json"}});case 3:200===e.sent.status&&console.log("Usuario "+t+"borrado");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return n?Object(r.jsx)(r.Fragment,{children:t.map((function(e,t){return Object(r.jsxs)("div",{className:"comment col media py-3",children:[Object(r.jsx)("div",{className:"mr-3",children:Object(r.jsx)("button",{className:"pet-delete btn btn-sm btn-danger",onClick:function(){return a(e.nombre)},children:Object(r.jsx)(x.a,{})})}),Object(r.jsxs)(u.b,{className:"article-list-item",to:"/articulo/".concat(e.nombre),children:[Object(r.jsx)("h3",{children:e.titulo}),Object(r.jsxs)("p",{children:[e.texto.substring(0,150),"..."]})]},t)]},t)}))}):Object(r.jsx)(r.Fragment,{children:t.map((function(e,t){return Object(r.jsxs)(u.b,{className:"article-list-item",to:"/articulo/".concat(e.nombre),children:[Object(r.jsx)("h3",{children:e.titulo}),Object(r.jsxs)("p",{children:[e.texto.substring(0,150),"..."]})]},t)}))})},f=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],o=n[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/obtenerArticulos");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Entradas del blog"}),Object(r.jsx)(p,{articulos:s,tokenSesion:e.tokenSesion})]})},m=function(e){return e.tokenSesion?Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/",children:"Home"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/about",children:"Sobre mi"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/articles-list",children:"Entradas del blog"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/users",children:"Gesti\xf3n Usuarios"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/nuevoPost",children:"Nuevo post"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/gestionarArticulos",children:"Gestionar Posts"})}),Object(r.jsxs)("li",{children:["Bienvenid@, ",e.tokenSesion]}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(t){return e.cerrarSesion()},children:"Cerrar Sesi\xf3n"})})]})}):Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/",children:"Home"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/about",children:"Sobre mi"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/articles-list",children:"Entradas del blog"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/admin",children:"AdminArea"})})]})})},v=function(){var e=Object(j.f)();return console.log(e),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"404: P\xe1gina no encontrada"}),Object(r.jsxs)("h1",{children:["Recurso no encontrado en ",e.pathname]})]})},g=function(e){var t=e.nombreArticulo,n=e.votos,c=e.setInfoArticulo,s=function(){var e=Object(h.a)(O.a.mark((function e(){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/articulos/".concat(t,"/votar"),{method:"post"});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,c(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{id:"upvotes-section",children:[Object(r.jsx)("button",{onClick:function(){return s()},children:"Me gusta"}),Object(r.jsxs)("p",{children:["Este art\xedculo ha recibiddo ",n," votos"]})]})},S=function(e){var t=e.nombre,n=Object(c.useState)([]),s=Object(i.a)(n,2),o=s[0],a=s[1];Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/obtenerArticulos");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var u=o.filter((function(e){return e.nombre!==t}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Entradas del blog"}),Object(r.jsx)(p,{articulos:u})]})},y=function(e){var t=e.nombre,n=Object(c.useState)({comentarios:[]}),s=Object(i.a)(n,2),o=s[0],a=s[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/articulo/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),Object(r.jsx)(r.Fragment,{children:o.comentarios.map((function(e,t){return Object(r.jsxs)("div",{className:"comment",children:[Object(r.jsx)("h4",{children:e.usuario}),Object(r.jsx)("p",{children:e.comentario})]},t)}))})},k=function(e){var t=e.nombreArticulo,n=e.setInfoArticulo,s=Object(c.useState)(""),o=Object(i.a)(s,2),a=o[0],u=o[1],j=Object(c.useState)(""),l=Object(i.a)(j,2),b=l[0],d=l[1],x=function(){var e=Object(h.a)(O.a.mark((function e(){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/articulos/".concat(t,"/comentar"),{method:"post",body:JSON.stringify({usuario:a,comentario:b}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:c=e.sent,n(c),u(""),d("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{id:"add-comment-form",children:[Object(r.jsx)("h3",{children:"A\xf1adir un comentario"}),Object(r.jsxs)("label",{children:["Nombre:",Object(r.jsx)("input",{type:"text",value:a,onChange:function(e){return u(e.target.value)}})]}),Object(r.jsxs)("label",{children:["Comentario:",Object(r.jsx)("textarea",{rows:"4",cols:"50",value:b,onChange:function(e){return d(e.target.value)}})]}),Object(r.jsx)("button",{onClick:function(){return x()},children:"Enviar comentario"})]})},w=function(e){var t=e.match.params.nombre,n=Object(c.useState)({}),s=Object(i.a)(n,2),o=s[0],a=s[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/articulo/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),null===o?Object(r.jsx)(v,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:o.titulo}),Object(r.jsx)(g,{nombreArticulo:t,votos:o.votos,setInfoArticulo:a}),Object(r.jsx)("p",{children:o.texto}),Object(r.jsx)("h3",{children:"Otros art\xedculos:"}),Object(r.jsx)(S,{nombre:t}),Object(r.jsx)(y,{nombre:t}),Object(r.jsx)(k,{nombreArticulo:t,setInfoArticulo:a})]})},C=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("h1",{children:"Pagina de administracion"})})},F=(n(20),function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),j=u[0],l=u[1],b=Object(c.useState)(),d=Object(i.a)(b,2),x=d[0],p=d[1];if(x)return Object(r.jsx)(C,{});!function(){if(sessionStorage.getItem("token")){var e=sessionStorage.getItem("token");p(e)}}();var f=function(e){p(e),sessionStorage.setItem("token",e)},m=function(){var t=Object(h.a)(O.a.mark((function t(n){var r,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/api/login",{method:"post",body:JSON.stringify({email:s,password:j}),headers:{"Content-Type":"application/json"}});case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,200===r.status&&(console.log("Token:"+c),f(c),e.setTokenSesion());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{id:"add-comment-form",className:"login-wrapper",children:Object(r.jsxs)("form",{onSubmit:m,children:[Object(r.jsx)("h3",{children:"Login"}),Object(r.jsxs)("label",{htmlFor:"email",children:["Nombre:",Object(r.jsx)("input",{id:"email",type:"text",value:s,placeholder:"Introducir email",onChange:function(e){return o(e.target.value)}})]}),Object(r.jsxs)("label",{htmlFor:"password",children:["Contrase\xf1a:",Object(r.jsx)("input",{id:"password",rows:"4",cols:"50",value:j,type:"password",placeholder:"Introducir contrase\xf1a",onChange:function(e){return l(e.target.value)}})]}),Object(r.jsx)("button",{type:"submit",children:"Iniciar sesi\xf3n"})]})})}),N=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],o=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("/api/borrarUsuario",{method:"post",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"}});case 3:200===e.sent.status&&console.log("Usuario "+t+"borrado");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/obtenenerTodosUsuarios");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),s(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),Object(r.jsx)(r.Fragment,{children:n.map((function(e,t){return Object(r.jsxs)("div",{className:"comment col media py-3",children:[Object(r.jsx)("div",{className:"mr-3",children:Object(r.jsx)("button",{className:"pet-delete btn btn-sm btn-danger",onClick:function(){return o(e.email)},children:Object(r.jsx)(x.a,{})})}),Object(r.jsx)("h4",{children:e.nombreUsuario}),Object(r.jsx)("p",{children:e.email})]},t)}))})},T=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),j=u[0],l=u[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),x=d[0],p=d[1],f=Object(c.useState)(""),m=Object(i.a)(f,2),g=m[0],S=m[1],y=function(){var e=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/nuevoUsuario",{method:"post",body:JSON.stringify({nombre:s,email:x,password:j}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent,200===t.status&&(S("Usuario dado de alta correctamente"),o(""),l(""),p(""));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.tokenSesion?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("form",{id:"add-comment-form",children:[Object(r.jsx)("h3",{children:"A\xf1adir un usuarioo"}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{className:"success text-success",children:g})}),Object(r.jsxs)("label",{htmlFor:"nombre",children:["Nombre:",Object(r.jsx)("input",{id:"nombre",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}})]}),Object(r.jsxs)("label",{htmlFor:x,children:["Email:",Object(r.jsx)("input",{id:"email",type:x,value:x,required:!0,onChange:function(e){return p(e.target.value)}})]}),Object(r.jsxs)("label",{htmlFor:j,children:["Contrase\xf1a:",Object(r.jsx)("input",{id:"password",value:j,required:!0,onChange:function(e){return l(e.target.value)}})]}),Object(r.jsx)("button",{onClick:function(){return y()},children:"Crear usuario"})]}),Object(r.jsx)(N,{})]}):Object(r.jsx)(v,{})},A=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],o=n[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/obtenerArticulos");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Entradas del blog"}),Object(r.jsx)(p,{articulos:s,tokenSesion:e.tokenSesion})]})},E=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],o=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),j=u[0],l=u[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),x=d[0],p=d[1],f=function(){var t=Object(h.a)(O.a.mark((function t(n){var r,c,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=s.replaceAll(" ","-"),c=Date.now(),console.log("fecha"+c+"Y nombre post"+r),t.next=6,fetch("/api/articulos/nuevoArticulo",{method:"post",body:JSON.stringify({nombre:r,texto:j,titulo:s,fechaCreacion:c,autor:e.tokenSesion}),headers:{"Content-Type":"application/json"}});case 6:return a=t.sent,t.next=9,a.json();case 9:t.sent,200===a.status&&(p("Usuario dado de alta correctamente"),o(""),l(""));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.tokenSesion?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{id:"add-comment-form",onSubmit:f,children:[Object(r.jsx)("h3",{children:"Crear un nuevo post"}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{className:"success text-success",children:x})}),Object(r.jsxs)("label",{htmlFor:"nombre",children:["T\xedtulo:",Object(r.jsx)("input",{id:"nombre",type:"text",value:s,required:!0,onChange:function(e){return o(e.target.value)}})]}),Object(r.jsxs)("label",{htmlFor:"textoPost",children:["Texto:",Object(r.jsx)("input",{id:"textoPost",type:"textarea",value:j,required:!0,onChange:function(e){return l(e.target.value)}})]}),Object(r.jsx)("input",{type:"submit",value:"Crear Post"})]})}):Object(r.jsx)(v,{})};var I=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){!function(){if(sessionStorage.getItem("token")){var e=sessionStorage.getItem("token");s(e)}}(),console.log("Usuario logado"+n)}),[n]),Object(r.jsx)(u.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(m,{tokenSesion:n,cerrarSesion:function(){sessionStorage.clear(),s(null)}}),Object(r.jsx)("div",{id:"page-body",children:Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{path:"/",component:l,exact:!0}),Object(r.jsx)(j.a,{path:"/about",component:b,exact:!0}),Object(r.jsx)(j.a,{path:"/articles-list",component:function(){return Object(r.jsx)(f,{tokenSesion:n})},exact:!0}),Object(r.jsx)(j.a,{path:"/articulo/:nombre",component:w}),Object(r.jsx)(j.a,{path:"/admin",component:function(){return Object(r.jsx)(F,{setTokenSesion:s})}}),Object(r.jsx)(j.a,{path:"/users",component:function(){return Object(r.jsx)(T,{tokenSesion:n})}}),Object(r.jsx)(j.a,{path:"/gestionarPost",component:function(){return Object(r.jsx)(A,{tokenSesion:n})}}),Object(r.jsx)(j.a,{path:"/nuevoPost",component:function(){return Object(r.jsx)(E,{tokenSesion:n})}}),Object(r.jsx)(j.a,{component:v})]})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),s(e),o(e)}))};a.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root")),P()}},[[38,1,2]]]);
//# sourceMappingURL=main.94bc4933.chunk.js.map